Merry Mauve Bear

false

# Algorithm error
---
name: Algorithm error
about: These are the audit items that end up in the report
title: "Algorithm error"
labels: "Medium"
assignees: "Beosin"

---

## Summary

Inconsistency in calculations related to the HEAL_PROBABILITY_MINUEND parameter

## Vulnerability Detail

Inconsistency between the parameters used in the initialization HEAL_PROBABILITY_MINUEND and subsequent calculations in the healProbability function.
The algorithm for calculating HEAL_PROBABILITY_MINUEND is *99-80. the calculation in HEALProbability is *19 (which is 99-80) .

## Impact

The result of the healProbability function calculation is large, affecting the token destruction in _healRequestFulfilled, and the return value deadAgentsCount is not increased. The end of the game was delayed.

## Code Snippet

Infiltration.sol#L379-381
Infiltration.sol#L1019-1028

## Tool used

Manual Review

## Recommendation

It is recommended to modify the HEAL_PROBABILITY_MINUEND parameter or the calculation in the healProbability function.
